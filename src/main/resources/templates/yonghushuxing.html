<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>分析概览</title>
    <link rel="stylesheet" href="/public/frame/layui/css/layui.css">
    <link rel="stylesheet" href="/public/frame/static/css/style.css">
    <link rel="icon" href="/public/frame/static/image/code.png">
    <link rel="stylesheet" href="/public/frame/layui/dist/layuiadmin/layui/css/layui.css" media="all">
    <script src="/public/frame/layui/dist/layuiadmin/layui/layui.js" charset="utf-8"></script>
    <link rel="stylesheet" href="/public/frame/layui/dist/layuiadmin/style/admin.css" media="all">
    <!-- 引入样式 -->
    <link rel="stylesheet" type="text/css"
          href="//raw.githack.com/hnzzmsf/layui-formSelects/master/dist/formSelects-v4.css"/>

</head>

<!--<body class="body" layadmin-themealias="default">-->
<body>
<div class="layui-fluid">
    <div class="layui-form layui-card-header layuiadmin-card-header-auto">
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">查询周期</label>
                <div class="layui-input-inline" style="width: 100px;">
                    <input type="text" id="time_min" name="time_min" placeholder="2019-09-17" autocomplete="off"
                           class="layui-input">
                </div>
                <div class="layui-form-mid">-</div>
                <div class="layui-input-inline" style="width: 100px;">
                    <input type="text" id="time_max" name="time_max" placeholder="2019-09-24" autocomplete="off"
                           class="layui-input">
                </div>
                <div class="layui-inline" style="width: 250px;">
                    <label class="layui-form-label">客群选择</label>
                    <div class="layui-input-block">
                        <select name="discountType" id="add_selectGroup">
                            <option value="">请选择客群</option>
                            <option value="0">全量用户</option>
                            <option value="1">活跃用户</option>
                            <option value="2">新增用户</option>
                        </select>
                    </div>
                </div>
                <div class="layui-inline" style="width: 350px;">
                    <label class="layui-form-label">属性选择</label>
                    <div class="layui-input-block">
                        <select name="city" xm-select="selectId">
                            <option value="1" selected="selected">省份</option>
                            <option value="2" selected="selected">年龄</option>
                            <option value="3">渠道</option>
                            <option value="4" selected="selected">性别</option>
                        </select>
                    </div>

                </div>
            </div>
            <div class="layui-inline">
                <button class="layui-btn layuiadmin-btn-admin" style="background-color: #4E5465" lay-submit=""
                        id="unionSearch" lay-filter="LAY-user-back-search">
                    <i class="layui-icon layui-icon-search layuiadmin-button-btn"></i>
                </button>
            </div>
        </div>
    </div>
    <div class="layui-row layui-col-space15">

        <div class="layui-row layui-col-space15">
            <div class="layui-col-sm6 layui-col-md7" style="height: 600px;width: 1000px">
                <div class="layui-card">
                    <div class="layui-card-header"><span class="layui-badge layui-bg-cyan" style="font-size: medium">7日|活跃用户省份分布</span>
                    </div>
                    <div class="layui-card-body layuiadmin-card-list">
                        <p id="">2019-09-24~2019-10-01</p>
                        <p>合计:</p>
                        <p class="layuiadmin-big-font">1,666</p>
                        <p>
                            环比:
                            <span> <img src="/public/frame/static/image/shangsheng.png" alt="logo"></span>
                            2.21%
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            同比:
                            <span> <img src="/public/frame/static/image/shangsheng.png" alt="logo"></span>
                            1.93%
                        </p>
                        <iframe
                                width="900px"
                                height="350px"
                                seamless
                                frameBorder="0"
                                scrolling="no"
                                src="http://47.106.104.241:8088/superset/explore/?form_data=%7B%22datasource%22%3A%2213__table%22%2C%22viz_type%22%3A%22bar%22%2C%22slice_id%22%3A87%2C%22url_params%22%3A%7B%7D%2C%22granularity_sqla%22%3A%22DayLiveDate%22%2C%22time_grain_sqla%22%3A%22P1D%22%2C%22time_range%22%3A%222019-09-24+%3A+2019-10-01%22%2C%22metrics%22%3A%5B%7B%22expressionType%22%3A%22SIMPLE%22%2C%22column%22%3A%7B%22id%22%3A445%2C%22column_name%22%3A%22%E6%97%A5%E5%A2%9E%22%2C%22verbose_name%22%3Anull%2C%22description%22%3Anull%2C%22expression%22%3A%22%22%2C%22filterable%22%3Atrue%2C%22groupby%22%3Atrue%2C%22is_dttm%22%3Afalse%2C%22type%22%3A%22VARCHAR%28255%29%22%2C%22database_expression%22%3Anull%2C%22python_date_format%22%3Anull%7D%2C%22aggregate%22%3A%22SUM%22%2C%22sqlExpression%22%3Anull%2C%22hasCustomLabel%22%3Afalse%2C%22fromFormData%22%3Atrue%2C%22label%22%3A%22SUM%28%E6%97%A5%E5%A2%9E%29%22%2C%22optionName%22%3A%22metric_xl01n2m4tbp_yw2b3oej48b%22%7D%5D%2C%22adhoc_filters%22%3A%5B%5D%2C%22groupby%22%3A%5B%22%E5%9C%B0%E5%9F%9F%E5%88%86%E5%B8%83%22%5D%2C%22timeseries_limit_metric%22%3Anull%2C%22order_desc%22%3Atrue%2C%22contribution%22%3Afalse%2C%22row_limit%22%3A10000%2C%22color_scheme%22%3A%22googleCategory20c%22%2C%22show_brush%22%3A%22auto%22%2C%22show_legend%22%3Atrue%2C%22show_bar_value%22%3Atrue%2C%22rich_tooltip%22%3Atrue%2C%22bar_stacked%22%3Atrue%2C%22line_interpolation%22%3A%22linear%22%2C%22show_controls%22%3Afalse%2C%22bottom_margin%22%3A%22auto%22%2C%22x_axis_label%22%3A%22%E6%97%A5%E6%9C%9F%22%2C%22x_ticks_layout%22%3A%22auto%22%2C%22x_axis_format%22%3A%22%25d%2F%25m%2F%25Y%22%2C%22x_axis_showminmax%22%3Afalse%2C%22reduce_x_ticks%22%3Afalse%2C%22y_axis_label%22%3A%22%E7%9C%81%E4%BB%BD%22%2C%22left_margin%22%3A%22auto%22%2C%22y_axis_showminmax%22%3Afalse%2C%22y_log_scale%22%3Afalse%2C%22y_axis_format%22%3A%22.3s%22%2C%22y_axis_bounds%22%3A%5Bnull%2Cnull%5D%2C%22rolling_type%22%3A%22None%22%2C%22comparison_type%22%3A%22values%22%2C%22resample_how%22%3Anull%2C%22resample_rule%22%3Anull%2C%22resample_fillmethod%22%3Anull%2C%22annotation_layers%22%3A%5B%5D%7D&standalone=true&height=300"
                        >
                        </iframe>
                    </div>
                </div>
                <!--</div>-->
            </div>
            <div class="layui-col-sm6 layui-col-md5" style="height: 460px;width: 550px">
                <div class="layui-card">
                    <div class="layui-card-header"><span class="layui-badge layui-bg-cyan" style="font-size: medium">7日|新增用户年龄分布</span>
                    </div>
                    <div class="layui-card-body">
                        <iframe
                                width="450"
                                height="300"
                                seamless
                                frameBorder="0"
                                scrolling="no"
                                src="http://47.106.104.241:8088/superset/explore/?form_data=%7B%22datasource%22%3A%2213__table%22%2C%22viz_type%22%3A%22bar%22%2C%22slice_id%22%3A88%2C%22url_params%22%3A%7B%7D%2C%22granularity_sqla%22%3A%22DayLiveDate%22%2C%22time_grain_sqla%22%3A%22P1D%22%2C%22time_range%22%3A%222019-09-24+%3A+2019-10-01%22%2C%22metrics%22%3A%5B%7B%22expressionType%22%3A%22SIMPLE%22%2C%22column%22%3A%7B%22id%22%3A445%2C%22column_name%22%3A%22%E6%97%A5%E5%A2%9E%22%2C%22verbose_name%22%3Anull%2C%22description%22%3Anull%2C%22expression%22%3A%22%22%2C%22filterable%22%3Atrue%2C%22groupby%22%3Atrue%2C%22is_dttm%22%3Afalse%2C%22type%22%3A%22VARCHAR%28255%29%22%2C%22database_expression%22%3Anull%2C%22python_date_format%22%3Anull%2C%22optionName%22%3A%22_col_%E6%97%A5%E5%A2%9E%22%7D%2C%22aggregate%22%3A%22SUM%22%2C%22sqlExpression%22%3Anull%2C%22hasCustomLabel%22%3Afalse%2C%22fromFormData%22%3Atrue%2C%22label%22%3A%22SUM%28%E6%97%A5%E5%A2%9E%29%22%2C%22optionName%22%3A%22metric_wdclzj3hcsg_xecr1cpzky%22%7D%5D%2C%22adhoc_filters%22%3A%5B%5D%2C%22groupby%22%3A%5B%22%E5%B9%B4%E9%BE%84%22%5D%2C%22timeseries_limit_metric%22%3Anull%2C%22order_desc%22%3Atrue%2C%22contribution%22%3Afalse%2C%22row_limit%22%3A10000%2C%22color_scheme%22%3A%22googleCategory20c%22%2C%22show_brush%22%3A%22auto%22%2C%22show_legend%22%3Atrue%2C%22show_bar_value%22%3Atrue%2C%22rich_tooltip%22%3Atrue%2C%22bar_stacked%22%3Atrue%2C%22line_interpolation%22%3A%22linear%22%2C%22show_controls%22%3Atrue%2C%22bottom_margin%22%3A%22auto%22%2C%22x_axis_label%22%3A%22%E6%97%A5%E6%9C%9F%22%2C%22x_ticks_layout%22%3A%22auto%22%2C%22x_axis_format%22%3A%22%25d%2F%25m%2F%25Y%22%2C%22x_axis_showminmax%22%3Afalse%2C%22reduce_x_ticks%22%3Afalse%2C%22y_axis_label%22%3A%22%E6%95%B0%E9%87%8F%22%2C%22left_margin%22%3A%22auto%22%2C%22y_axis_showminmax%22%3Afalse%2C%22y_log_scale%22%3Afalse%2C%22y_axis_format%22%3A%22.3s%22%2C%22y_axis_bounds%22%3A%5Bnull%2Cnull%5D%2C%22rolling_type%22%3A%22None%22%2C%22comparison_type%22%3A%22values%22%2C%22resample_how%22%3Anull%2C%22resample_rule%22%3Anull%2C%22resample_fillmethod%22%3Anull%2C%22annotation_layers%22%3A%5B%5D%7D&standalone=true&height=300"
                        >
                        </iframe>
                    </div>
                </div>
                <!--</div>-->
            </div>
            <div class="layui-col-sm6 layui-col-md5" style="height: 460px;width: 550px">
                <div class="layui-card">
                    <div class="layui-card-header"><span class="layui-badge layui-bg-cyan" style="font-size: medium">7日|新增用户性别分布</span>
                    </div>
                    <div class="layui-card-body">
                        <iframe
                                width="450"
                                height="300"
                                seamless
                                frameBorder="0"
                                scrolling="no"
                                src="http://47.106.104.241:8088/superset/explore/?form_data=%7B%22datasource%22%3A%2213__table%22%2C%22viz_type%22%3A%22pie%22%2C%22slice_id%22%3A89%2C%22url_params%22%3A%7B%7D%2C%22granularity_sqla%22%3A%22DayLiveDate%22%2C%22time_grain_sqla%22%3A%22P1D%22%2C%22time_range%22%3A%222019-09-24+%3A+2019-10-01%22%2C%22metric%22%3A%7B%22expressionType%22%3A%22SIMPLE%22%2C%22column%22%3A%7B%22id%22%3A445%2C%22column_name%22%3A%22%E6%97%A5%E5%A2%9E%22%2C%22verbose_name%22%3Anull%2C%22description%22%3Anull%2C%22expression%22%3A%22%22%2C%22filterable%22%3Atrue%2C%22groupby%22%3Atrue%2C%22is_dttm%22%3Afalse%2C%22type%22%3A%22VARCHAR%28255%29%22%2C%22database_expression%22%3Anull%2C%22python_date_format%22%3Anull%2C%22optionName%22%3A%22_col_%E6%97%A5%E5%A2%9E%22%7D%2C%22aggregate%22%3A%22SUM%22%2C%22sqlExpression%22%3Anull%2C%22hasCustomLabel%22%3Afalse%2C%22fromFormData%22%3Atrue%2C%22label%22%3A%22SUM%28%E6%97%A5%E5%A2%9E%29%22%2C%22optionName%22%3A%22metric_hu0modz6ut_qu3js9gkexg%22%7D%2C%22adhoc_filters%22%3A%5B%5D%2C%22groupby%22%3A%5B%22%E6%80%A7%E5%88%AB%22%5D%2C%22row_limit%22%3A10000%2C%22pie_label_type%22%3A%22key_percent%22%2C%22donut%22%3Atrue%2C%22show_legend%22%3Atrue%2C%22show_labels%22%3Atrue%2C%22labels_outside%22%3Atrue%2C%22color_scheme%22%3A%22googleCategory20c%22%7D&standalone=true&height=300"
                        >
                        </iframe>
                    </div>
                </div>
                <!--</div>-->
            </div>


        </div>


    </div>
</div>
<style id="LAY_layadmin_theme">.layui-side-menu, .layadmin-pagetabs .layui-tab-title li:after, .layadmin-pagetabs .layui-tab-title li.layui-this:after, .layui-layer-admin .layui-layer-title, .layadmin-side-shrink .layui-side-menu .layui-nav > .layui-nav-item > .layui-nav-child {
    background-color: #20222A !important;
}

.layui-nav-tree .layui-this, .layui-nav-tree .layui-this > a, .layui-nav-tree .layui-nav-child dd.layui-this, .layui-nav-tree .layui-nav-child dd.layui-this a {
    background-color: #009688 !important;
}

.layui-layout-admin .layui-logo {
    background-color: #20222A !important;
}</style>
<script type="text/javascript" src="/public/frame/layui/layui.js"></script>
<script type="text/javascript" src="/public/js/index.js"></script>
<script type="text/javascript" src="/public/frame/echarts/echarts.min.js"></script>
<!-- 引入jquery依赖 -->
<script src="//unpkg.com/jquery@3.3.1/dist/jquery.min.js" type="text/javascript" charset="utf-8"></script>
<!-- 引入组件 -->
<script src="//raw.githack.com/hnzzmsf/layui-formSelects/master/dist/formSelects-v4.js" type="text/javascript"
        charset="utf-8"></script>
<script type="text/javascript">
    layui.use(['element', 'form', 'table', 'layer', 'vip_table', 'laydate'], function () {
        var form = layui.form,
            table = layui.table,
            layer = layui.layer,
            vipTable = layui.vip_table,
            element = layui.element,
            $ = layui.jquery;
        var laydate = layui.laydate;
        var formSelects = layui.formSelects;

        formSelects.render('selectId');
        laydate.render({
            elem: '#time_min' //指定元素
        });

        laydate.render({
            elem: '#time_max' //指定元素
        });
        $(function () {
            //初始化面板日期
            $('#date1').text(getDay(-7) + "~" + getDay(0));
            $('#date2').text(getDay(-7) + "~" + getDay(0));
            $('#date3').text(getDay(-30) + "~" + getDay(0));
            $('#date4').text(getDay(-30) + "~" + getDay(0));
        });


        function getDay(day) {
            var today = new Date();
            var targetday_milliseconds = today.getTime() + 1000 * 60 * 60 * 24 * day;
            today.setTime(targetday_milliseconds); //注意，这行是关键代码
            var tYear = today.getFullYear();
            var tMonth = today.getMonth();
            var tDate = today.getDate();
            tMonth = doHandleMonth(tMonth + 1);
            tDate = doHandleMonth(tDate);
            return tYear + "-" + tMonth + "-" + tDate;
        }

        function doHandleMonth(month) {
            var m = month;
            if (month.toString().length == 1) {
                m = "0" + month;
            }
            return m;

        }
    });
</script>
</body>

</html>